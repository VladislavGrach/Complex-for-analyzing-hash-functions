@model Complex_for_analyzing_hash_functions.Models.HashTestResult
@using System.Text.Json;

@{
    ViewData["Title"] = "Результат тестирования";
    var stats = JsonSerializer.Deserialize<JsonElement>(Model.BitFlipJson);
}

<h2 class="mb-4">Результаты тестирования</h2>

<div class="card mb-4">
    <div class="card-header">
        Основная статистика
    </div>
    <div class="card-body">
        <p><b>Алгоритм:</b> @Model.Algorithm</p>
        <p><b>Раунды:</b> @Model.Rounds</p>
        <p><b>Количество тестов:</b> @Model.TestsCount</p>
        <p><b>Дата запуска:</b> @Model.RunDate</p>
    </div>
</div>

@if (stats.TryGetProperty("NIST", out var nist))
{
    <div class="card mb-4">
        <div class="card-header">
            Результаты NIST тестов
        </div>
        <div class="card-body">
            <ul>
                @foreach (var test in nist.EnumerateObject())
                {
                    <li><b>@test.Name:</b> @test.Value</li>
                }
            </ul>
        </div>
    </div>
}

@if (stats.TryGetProperty("Diehard", out var dh))
{
    <div class="card mb-4">
        <div class="card-header">
            Результаты Diehard тестов
        </div>
        <div class="card-body">
            <ul>
                @foreach (var test in dh.EnumerateObject())
                {
                    <li><b>@test.Name:</b> @test.Value</li>
                }
            </ul>
        </div>
    </div>
}
@if (stats.TryGetProperty("TestU01", out var tu01))
{
    <div class="card mb-4">
        <div class="card-header">
            Результаты TestU01 тестов
        </div>
        <div class="card-body">
            <ul>
                @foreach (var test in tu01.EnumerateObject())
                {
                    <li><b>@test.Name:</b> @test.Value</li>
                }
            </ul>
        </div>
    </div>
}
<div class="card">
    <div class="card-header">
        Полный JSON (вспомогательная информация)
    </div>
    <div class="card-body">
        <pre style="background:#f8f8f8; padding:15px; border-radius:6px; white-space:pre-wrap;">
            @Model.BitFlipJson
        </pre>
    </div>
</div>
